# BigEvent 数据库设计文档

## 文档信息


| 项目       | 说明                    |
| ---------- | ----------------------- |
| 文档名称   | BigEvent 数据库设计文档 |
| 数据库系统 | MySQL                   |
| 字符编码   | utf8mb4                 |
| 数据库名称 | big_event               |

## 版本历史


| 版本号 | 修订日期   | 修订内容     | 修订人员 |
| ------ | ---------- | ------------ | -------- |
| v1.0   | 2024-01-01 | 初始版本创建 | starry   |

## 目录

- [1 文档概述](#1-文档概述)
- [2 数据库简介](#2-数据库简介)
- [3 数据表结构详述](#3-数据表结构详述)
  - [3.1 用户表 (user)](#31-用户表-user)
  - [3.2 分类表 (category)](#32-分类表-category)
  - [3.3 文章表 (article)](#33-文章表-article)
- [4 数据关系说明](#4-数据关系说明)
- [5 索引设计策略](#5-索引设计策略)
- [6 数据完整性保证机制](#6-数据完整性保障机制)

## 1 文档概述

本文档详尽阐述了 BigEvent 项目数据库的整体架构设计。该数据库基于 MySQL 关系型数据库管理系统构建，采用 utf8mb4 字符编码以全面支持 Unicode 字符集。数据库设计严格遵循关系数据库规范化原则，确保数据的一致性、完整性和可靠性。

## 2 数据库简介

BigEvent 数据库旨在为事件管理系统提供稳健的数据存储解决方案，核心功能模块涵盖用户管理、分类管理及文章管理。数据库设计充分考虑了性能优化、数据完整性维护以及系统可扩展性需求。

### 核心特性

- **字符编码**: utf8mb4，完整支持 Unicode 字符集
- **数据表数量**: 3张核心业务表
- **关系完整性**: 完善的外键约束机制
- **索引策略**: 基于主键与唯一约束的查询优化

## 3 数据表结构详述

### 3.1 用户表 (user)

用户表负责存储系统所有注册用户的身份信息、认证数据及个性化配置。

**数据表结构明细:**


| 序号 | 列名        | 数据类型     | 长度 | 小数位 | 标识 | 主键 | 允许空 | 默认值   | 说明                      |
| ---- | ----------- | ------------ | ---- | ------ | ---- | ---- | ------ | -------- | ------------------------- |
| 1    | id          | int unsigned | 10   | 0      | 是   | 是   |        | -        | 用户唯一标识符，自动递增  |
| 2    | username    | varchar      | 20   | -      |      |      |        | -        | 用户登录账号，全局唯一    |
| 3    | password    | varchar      | 32   | -      |      |      | 是     | -        | 用户认证密码，采用MD5加密 |
| 4    | nickname    | varchar      | 10   | -      |      |      | 是     | 空字符串 | 用户显示昵称              |
| 5    | email       | varchar      | 128  | -      |      |      | 是     | 空字符串 | 用户电子邮箱地址          |
| 6    | user_pic    | varchar      | 128  | -      |      |      | 是     | 空字符串 | 用户头像文件存储路径      |
| 7    | create_time | datetime     | -    | -      |      |      |        | -        | 记录创建时间戳            |
| 8    | update_time | datetime     | -    | -      |      |      |        | -        | 记录最后更新时间戳        |

**约束条件:**

- 主键约束: `PRIMARY KEY (id)`
- 唯一性约束: `UNIQUE (username)`

### 3.2 分类表 (category)

分类表用于构建文章内容的分类体系，支持灵活的内容组织与管理。

**数据表结构明细:**


| 序号 | 列名           | 数据类型     | 长度 | 小数位 | 标识 | 主键 | 允许空 | 默认值 | 说明                       |
| ---- | -------------- | ------------ | ---- | ------ | ---- | ---- | ------ | ------ | -------------------------- |
| 1    | id             | int unsigned | 10   | 0      | 是   | 是   | 否     | -      | 分类唯一标识符，自动递增   |
| 2    | category_name  | varchar      | 32   | -      | 否   | 否   | 否     | -      | 分类正式名称               |
| 3    | category_alias | varchar      | 32   | -      | 否   | 否   | 否     | -      | 分类别名，用于系统内部引用 |
| 4    | create_user    | int unsigned | 10   | 0      | 否   | 否   | 否     | -      | 分类创建者用户ID           |
| 5    | create_time    | datetime     | -    | -      | 否   | 否   | 否     | -      | 记录创建时间戳             |
| 6    | update_time    | datetime     | -    | -      | 否   | 否   | 否     | -      | 记录最后更新时间戳         |

**约束条件:**

- 主键约束: `PRIMARY KEY (id)`
- 外键约束: `FOREIGN KEY (create_user) REFERENCES user(id)`

### 3.3 文章表 (article)

文章表作为系统核心业务表，存储所有文章内容的完整信息及相关元数据。

**数据表结构明细:**


| 序号 | 列名        | 数据类型     | 长度  | 小数位 | 标识 | 主键 | 允许空 | 默认值 | 说明                      |
| ---- | ----------- | ------------ | ----- | ------ | ---- | ---- | ------ | ------ | ------------------------- |
| 1    | id          | int unsigned | 10    | 0      | 是   | 是   | 否     | -      | 文章唯一标识符，自动递增  |
| 2    | title       | varchar      | 30    | -      | 否   | 否   | 否     | -      | 文章标题                  |
| 3    | content     | varchar      | 10000 | -      | 否   | 否   | 否     | -      | 文章正文内容              |
| 4    | cover_img   | varchar      | 128   | -      | 否   | 否   | 否     | -      | 文章封面图片存储路径      |
| 5    | state       | varchar      | 3     | -      | 否   | 否   | 是     | '草稿' | 文章发布状态：草稿/已发布 |
| 6    | category_id | int unsigned | 10    | 0      | 否   | 否   | 是     | -      | 文章所属分类ID            |
| 7    | create_user | int unsigned | 10    | 0      | 否   | 否   | 否     | -      | 文章创建者用户ID          |
| 8    | create_time | datetime     | -     | -      | 否   | 否   | 否     | -      | 记录创建时间戳            |
| 9    | update_time | datetime     | -     | -      | 否   | 否   | 否     | -      | 记录最后更新时间戳        |

**约束条件:**

- 主键约束: `PRIMARY KEY (id)`
- 外键约束: `FOREIGN KEY (category_id) REFERENCES category(id)`
- 外键约束: `FOREIGN KEY (create_user) REFERENCES user(id)`

## 4 数据关系说明

数据库中各表之间存在以下引用关系：

1. **分类表 → 用户表**

   - `category.create_user` 引用 `user.id`
   - 确保每个分类都有有效的创建者
2. **文章表 → 分类表**

   - `article.category_id` 引用 `category.id`
   - 建立文章与分类的归属关系
3. **文章表 → 用户表**

   - `article.create_user` 引用 `user.id`
   - 记录文章的创建者信息

## 5 索引设计策略

### 主键索引

- 所有数据表均采用自增整型主键
- 提供高效的主键检索能力

### 唯一索引

- `user.username`: 保障用户账号唯一性
- 支撑快速的身份验证查询

### 外键索引

- 所有外键字段自动创建关联索引
- 优化多表关联查询性能

### 性能优化建议

1. 时间戳字段可根据查询频率考虑添加索引
2. 文章状态字段建议建立索引以支持状态筛选
3. 大文本字段应避免在查询条件中使用
4. 分类名称和文章标题可考虑添加前缀索引

## 6 数据完整性保障机制

1. **实体完整性**: 通过主键约束实现
2. **参照完整性**: 通过外键约束实现
3. **域完整性**: 通过数据类型、长度限制及默认值实现
4. **用户定义完整性**: 通过业务逻辑约束实现

该数据库设计方案为 BigEvent 系统提供了坚实的数据基础架构，充分保障系统核心业务功能的稳定运行和高效处理。
